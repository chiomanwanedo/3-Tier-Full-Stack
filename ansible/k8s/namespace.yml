---
- name: Ensure app namespace exists
  hosts: localhost
  connection: local
  gather_facts: false
  vars:
    kubeconfig: "{{ lookup('env','HOME') }}/.kube/config"   # change if yours is elsewhere
  collections:
    - kubernetes.core

  tasks:
    - name: Create webapps namespace
      kubernetes.core.k8s:
        kubeconfig: "{{ kubeconfig }}"
        state: present
        definition:
          apiVersion: v1
          kind: Namespace
          metadata:
            name: webapps
